<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>IFE ECMAScript</title>
  <style>
  </style>
</head>

<body>

  <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
  <button id="fade-btn">淡出</button>

  <script>
    var fade_obj = document.getElementById("fade-obj");
    var fade_btn = document.getElementById("fade-btn");

    var opacity = 1;

    function fadeIn() {
      if (opacity >= 1) {
        clearTimeout();
        opacity = 1;
        fade_btn.textContent = "淡出";
        fade_btn.onclick = fadeOut;
      } else {
        opacity += 0.02;
        fade_obj.style.opacity = opacity;
        setTimeout(fadeIn, 24);
      }
    }

    function fadeOut() {
      if (opacity <= 0) {
        clearTimeout();
        opacity = 0;
        fade_btn.textContent = "淡入";
        fade_btn.onclick = fadeIn;
      } else {
        opacity -= 0.02;
        fade_obj.style.opacity = opacity;
        setTimeout(fadeOut, 24);
      }
    };

    fade_btn.onclick = fadeOut;
  </script>
</body>

</html>